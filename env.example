NODE_ENV=development
APP_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3000
LOG_LEVEL=debug

# Auth
JWT_SECRET=dev-secret
JWT_REFRESH_SECRET=dev-refresh
ACCESS_TOKEN_TTL=15m
REFRESH_TOKEN_TTL=7d

# DB (Neon – usar pooler e SSL)
# Exemplo: postgresql://USER:PASS@YOUR_NEON_PROJECT_POOLER.neon.tech/DB?sslmode=require&pgbouncer=true
DATABASE_URL=

# Redis (TCP) – Upstash (aba TCP). Ex.: rediss://default:<SENHA>@<HOST>:<PORT>
REDIS_URL=rediss://default:AYQPAAIncDFiNDA0NzVjYTI3ZmE0NGM5YTNhMDQ4NjY2MzBmOWYxOXAxMzM4MDc@amusing-guinea-33807.upstash.io:6379

# (opcional – REST da Upstash, NÃO usado pelo BullMQ; manter vazio)
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# Front → API
NEXT_PUBLIC_API_URL=http://localhost:8080
WS_ALLOWED_ORIGINS=http://localhost:3000

# WhatsApp Providers
WHATS_PROVIDER=whatsapp_cloud
META_APP_ID=
META_APP_SECRET=
META_ACCESS_TOKEN=
META_WABA_ID=
META_PHONE_ID=
META_VERIFY_TOKEN=
META_WEBHOOK_SECRET=

# Baileys Session Store
BAILEYS_SESSION_STORE=file
BAILEYS_SESSION_BUCKET=./sessions

# Campaigns
CAMPAIGN_MAX_CPS_PER_CHANNEL=10
CAMPAIGN_CONCURRENCY=5
CAMPAIGN_RETRY_ATTEMPTS=5
CAMPAIGN_RETRY_BACKOFF_MS=2000
CAMPAIGN_BATCH_SIZE=200

# Scheduler (cron para reprocessos/rollups)
SCHEDULER_CRON_AGGREGATES=*/5 * * * *
SCHEDULER_CRON_RECOVERY=*/2 * * * *

# Business Hours / Timezone
BUSINESS_HOURS_TZ=America/Sao_Paulo

# SLA (minutos)
SLA_FIRST_RESPONSE_MINUTES=15
SLA_RESOLUTION_MINUTES=480

# Cron jobs (dev)
SLA_CRON=*/1 * * * *              # a cada 1 min verifica SLAs
AUTOMATIONS_CRON=*/1 * * * *      # a cada 1 min reprocessa filas/eventos pendentes

# Atribuição
ASSIGNMENT_STRATEGY=round_robin   # round_robin | least_loaded

# Logs & Telemetry
LOG_LEVEL=info
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
PROMETHEUS_METRICS_ENABLED=true
PROMETHEUS_METRICS_PORT=9464

# Auditoria / Privacidade
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90
REDACT_PII=true

# Billing Core
BILLING_ENABLED=true
BILLING_PROVIDER=mock                 # mock | stripe
BILLING_ANCHOR_DAY=1                 # dia do mês p/ reset (1..28)

# Quotas (padrões p/ Free, usadas no seed; valores reais vêm do DB)
DEFAULT_FREE_MAX_USERS=3
DEFAULT_FREE_MAX_CHANNELS=1
DEFAULT_FREE_MAX_MESSAGES_MONTH=5000
DEFAULT_FREE_MAX_CAMPAIGNS_DAY=2
DEFAULT_FREE_RETENTION_DAYS=30

# Stripe (opcional; test mode)
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_PRICE_PRO_MONTHLY=price_xxx
STRIPE_PRICE_BUSINESS_MONTHLY=price_yyy
STRIPE_WEBHOOK_SECRET=

# Web URLs (para checkout/portal redirecionar)
APP_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:8080

# Plugins & Webhooks
PLUGINS_ENABLED=true
MARKETPLACE_PUBLIC_URL=http://localhost:3000/marketplace

WEBHOOK_OUTBOUND_ENABLED=true
WEBHOOK_SIGNING_ALGO=hmac-sha256
WEBHOOK_SIGNING_HEADER=X-Atendechat-Signature
WEBHOOK_TIMESTAMP_HEADER=X-Atendechat-Timestamp
WEBHOOK_IDEMPOTENCY_HEADER=X-Atendechat-Idempotency
WEBHOOK_TIMEOUT_MS=8000
WEBHOOK_MAX_RETRIES=8
WEBHOOK_BACKOFF_BASE_MS=2000
WEBHOOK_JITTER_MS=400
WEBHOOK_ALLOW_HTTP=false            # true só em dev
WEBHOOK_DOMAIN_ALLOWLIST=           # csv opcional: api.zapier.com,hooks.slack.com

# App Tokens (para plugins chamarem nossa API)
APP_TOKEN_PREFIX=atk_
APP_TOKEN_TTL_DAYS=365

# (Reuso do Passo 9)
DATA_ENC_KEY=                       # AES-256-GCM (base64, 32 bytes)
REDACT_PII=true

# QA / Perf flags
QA_SEED_DEMO=true
QA_SYNTHETIC_USERS=20
QA_SYNTHETIC_TICKETS=1000
QA_SYNTHETIC_MESSAGES_PER_TICKET=5

# SLO (alvos; expor em /metrics)
SLO_API_P50_MS=120
SLO_API_P95_MS=350
SLO_WS_DELIVERY_P95_MS=1000
SLO_QUEUE_LAG_P95_MS=1000

# k6
K6_BASE_URL=http://localhost:8080
K6_WEB_URL=http://localhost:3000
K6_ACCESS_EMAIL=admin@test.com
K6_ACCESS_PASSWORD=123456

# BullMQ tuning (default seguro)
BULLMQ_MESSAGES_CONCURRENCY=8
BULLMQ_CAMPAIGNS_CONCURRENCY=5
BULLMQ_RATE_LIMIT_CPS=10
BULLMQ_LOCK_DURATION_MS=30000
BULLMQ_MAX_STALLED=1

# Cache
CACHE_DASHBOARD_TTL_S=15
CACHE_SETTINGS_TTL_S=300
